<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Настройки</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
        }
        h2 {
            color: #333;
        }
        form {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        label {
            font-weight: bold;
            margin-bottom: 5px;
            display: inline-block;
            width: 150px;
        }
        input[type="text"], select {
           
            padding: 8px;
            margin-bottom: 15px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }
        input[type="submit"] {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        input[type="submit"]:hover {
            background-color: #45a049;
        }
    </style>
    <script>
        function validateForm() {
		validateForm_ip();
            var id_product = document.getElementById("id_product").value;
            if (id_product.length !== 6) {
                alert("Поле 'Номер устройства' должно содержать  6 символов.");
                return false;
            }
            return true;
        }
		
		function validateForm_ip() {
		
        var ipInput = document.getElementById('ip').value;
        var form = document.getElementById('myForm');
        var errorMsg = document.getElementById('error-msg');

        // Пример простой валидации IP-адреса для демонстрации
        var ipRegex = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
        if (!ipRegex.test(ipInput)) {
            errorMsg.textContent = "Неверный формат IP-адреса.";
            return false;
        } else {
            // Сброс сообщения об ошибке, если IP-адрес валиден
            errorMsg.textContent = "";
        }
        // Замена адреса в атрибуте action на введенный IP-адрес
        form.action = 'http://' + ipInput + '/setingdata';        
        return true; // Вернуть true, чтобы отправить форму		
    }
		
		 document.addEventListener("DOMContentLoaded", function() {
        var modelSelect = document.getElementById("model_id");
        var minTokInput = document.querySelector('input[name="MinTok"]');
		var taimInput = document.querySelector('input[name="taim"]');
		
		var max1 = document.querySelector('input[name="max1"]');
		var max2 = document.querySelector('input[name="max2"]');
		var max3 = document.querySelector('input[name="max3"]');
		var max4 = document.querySelector('input[name="max4"]');
		
		var min1 = document.querySelector('input[name="min1"]');
		var min2 = document.querySelector('input[name="min2"]');
		var min3 = document.querySelector('input[name="min3"]');
		var min4 = document.querySelector('input[name="min4"]');
		

        modelSelect.addEventListener("change", function() {
            var selectedModel = modelSelect.value;

            if (selectedModel === "H26" || selectedModel === "600") {
                minTokInput.value = "50";
            } else {
                minTokInput.value = "800";
            }
			if (selectedModel === "600" ) {
                taimInput.value = "40";
            } else if (selectedModel === "800" ) {
               taimInput.value = "45";
            }
			
			 switch (selectedModel) {
                case "600":
                taimInput.value = "40";
				max1.value  = "3000";
				max2.value  = "1200";
				max3.value  = "1200";
				max4.value  = "1200";
				
				min1.value  = "700";
				min2.value  = "700";
				min3.value  = "650";
				min4.value  = "650";				
				break;
                case "800":
				taimInput.value = "45";
				max1.value  = "4000";
				max2.value  = "1500";
				max3.value  = "1200";
				max4.value  = "1200";
				
				min1.value  = "700";
				min2.value  = "700";
				min3.value  = "650";
				min4.value  = "650";	
				break;
                case "1000":
				taimInput.value = "50";
				max1.value  = "4000";
				max2.value  = "1500";
				max3.value  = "1200";
				max4.value  = "1200";
				
				min1.value  = "700";
				min2.value  = "700";
				min3.value  = "650";
				min4.value  = "650";	
				break;
                case "1200":
				taimInput.value = "60";
				max1.value  = "5000";
				max2.value  = "2500";
				max3.value  = "1200";
				max4.value  = "1200";
				
				min1.value  = "700";
				min2.value  = "700";
				min3.value  = "650";
				min4.value  = "650";	
				break;
                case "1500":
				taimInput.value = "70";
				max1.value  = "2800";
				max2.value  = "1800";
				max3.value  = "2800";
				max4.value  = "1800";
				
				min1.value  = "700";
				min2.value  = "700";
				min3.value  = "700";
				min4.value  = "700";	
				break;
                case "2000":
				taimInput.value = "80";
				max1.value  = "4000";
				max2.value  = "1500";
				max3.value  = "1200";
				max4.value  = "1200";
				
				min1.value  = "700";
				min2.value  = "700";
				min3.value  = "650";
				min4.value  = "650";	
				break;
                case "2400":
				taimInput.value = "100";
				max1.value  = "5000";
				max2.value  = "2500";
				max3.value  = "1200";
				max4.value  = "1200";
				
				min1.value  = "700";
				min2.value  = "700";
				min3.value  = "650";
				min4.value  = "650";	
				break;
				case "H26":
				taimInput.value = "40";
				max1.value  = "3000";
				max2.value  = "1200";
				max3.value  = "1200";
				max4.value  = "1200";
				
				min1.value  = "700";
				min2.value  = "700";
				min3.value  = "650";
				min4.value  = "650";		
				break;
                case "H800":
				taimInput.value = "45";
				max1.value  = "4000";
				max2.value  = "1500";
				max3.value  = "1200";
				max4.value  = "1200";
				
				min1.value  = "700";
				min2.value  = "700";
				min3.value  = "650";
				min4.value  = "650";	
				break;
                case "H1000":
				taimInput.value = "50";
				max1.value  = "4000";
				max2.value  = "1500";
				max3.value  = "1200";
				max4.value  = "1200";
				
				min1.value  = "700";
				min2.value  = "700";
				min3.value  = "650";
				min4.value  = "650";	
				break;
                case "H1500":
				taimInput.value = "70";
				max1.value  = "2800";
				max2.value  = "1800";
				max3.value  = "2800";
				max4.value  = "1800";
				
				min1.value  = "700";
				min2.value  = "700";
				min3.value  = "700";
				min4.value  = "700";	
				break;                
                default:
                    taimInput.value = "40"; // Значение по умолчанию
                    break;
            }
			
			
			
        });
    });
    </script>
</head>
<body>
    <h2>Настройки</h2>
	<form onsubmit="return ">
	<label for="IP">IP:</label>
    <input type="text" id="ip" name="ip"  size="10" value="192.168.0.45">
    </form><br>
	<div id="error-msg"></div><br>
	<form  id="myForm" action="http://192.168.4.1/setingdata" method="GET" onsubmit="return validateForm()">
        <label for="id_product">Номер устройства:</label>
        <input type="text" id="id_product" name="id_product" maxlength="6"  size="4"><br><br>

        <label for="model_id">Модель:</label>
        <select id="model_id" name="model_id">
            <option value="600">600</option>
            <option value="800">800</option>
            <option value="1000">1000</option>
            <option value="1200">1200</option>
            <option value="1500">1500</option>
            <option value="2000">2000</option>
            <option value="2400">2400</option>
            <option value="H26">H26</option>
            <option value="H800">H800</option>
            <option value="H1000">H1000</option>
            <option value="H1500">H1500</option>
        </select><br><br>

        <label for="dopColor">Комплектация:</label>
        <select id="dopColor" name="dopColor">
            <option value="1">Обычный</option>
            <option value="2">RGB</option>
        </select><br><br>

        <label for="maxValues">MAX значение:</label><br>
        <input type="text" name="max1" size="2" value="3000">
        <input type="text" name="max2" size="2" value="1200">
        <input type="text" name="max3" size="2" value="1200">
        <input type="text" name="max4" size="2" value="1200"><br><br>

        <label for="minValues">MIN значение:</label><br>
        <input type="text" name="min1" size="2" value="700">
        <input type="text" name="min2" size="2" value="700">
        <input type="text" name="min3" size="2" value="650">
        <input type="text" name="min4" size="2" value="650"><br><br>

        <label for="taim">Время работы помпы в секундах:</label>
        <input type="text" name="taim" size="3" value="40"><br><br>

        <label for="MinTok">Регулировка тока отключения:</label>
        <input type="text" name="MinTok" size="3" value="50"><br><br>

        <input type="submit" value="Отправить">
    </form>
</body>
</html>
